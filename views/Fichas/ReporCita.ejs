<!DOCTYPE html>
<html lang="es">
<head>
	<link rel="icon" type="image/png" sizes="16x16" href="/images/hospital.png">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Cajas</title>
	<meta charset="UTF-8">
	<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
	<link href="/css/font-awesome.css" rel="stylesheet" type="text/css" />
	<link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/animate.css" rel="stylesheet" type="text/css" />
	<link href="/css/admin.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/data-tables/DT_bootstrap.css" rel="stylesheet">
	<link href="/plugins/advanced-datatable/css/demo_table.css" rel="stylesheet">
	<link href="/plugins/advanced-datatable/css/demo_page.css" rel="stylesheet">
	<!--validaciones-->
	<link href="/plugins/toggle-switch/toggles.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/checkbox/icheck.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/checkbox/minimal/blue.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/checkbox/minimal/green.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/checkbox/minimal/grey.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/checkbox/minimal/orange.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/checkbox/minimal/pink.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/checkbox/minimal/purple.css" rel="stylesheet" type="text/css" />
	<link href="/plugins/bootstrap-fileupload/bootstrap-fileupload.min.css" rel="stylesheet">
	<link href="/plugins/dropzone/dropzone.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="/plugins/bootstrap-datepicker/css/datepicker.css" />
	<link rel="stylesheet" type="text/css" href="/plugins/bootstrap-timepicker/compiled/timepicker.css" />
	<link rel="stylesheet" type="text/css" href="/plugins/bootstrap-colorpicker/css/colorpicker.css" />	
	<link rel="stylesheet" href="/sweetalert2/dist/sweetalert2.min.css">
	<%- include("../partials/head") -%>
	<style type="text/css">
		@media print{
	  		@page {
				size: A4 ;
				margin: 0;
			}
			.margeni{
				width: 100%;
				border: 1px;
				position: relative;
				border-top-style: dashed;
				border-bottom-style: dotted;
				border-left-style: solid; 
			}
			#sacar{
				height: 9%;
				overflow-x: hidden;
			}
			.ordendetitulo{
				position: absolute;
				float: center;
				top: 2%;
				bottom: 1%;
				margin-top: 10%;
				margin-left: 10%;
				padding-left: 25%;
			}
			.ordende2{
				position: static;
				float: center;
				top: 20%;
				bottom: 1%;
				margin-top: 14%;
			}
			.cafirma1{
				width: 25%;
				margin-left: 5%;
				float:left;
				border-top-style: dotted;
			}
			.cafirma2{
				width: 25%;   
				margin-right: 5%;
				float: right;
				border-top-style: dotted;
			}
			#sinMarge{
				top: 2%;
				border: 0px;
				padding-left: 0% ;
				padding-top: 0%;
				margin-left: 0%;
				margin-right: 0%;
				padding: 0px;
				position: relative;
				border-top-style: dashed;
				border-right-style: double;
				border-left-style: solid; 
			}			
			.texTitulo1:before {
				content: " REPORTE DE CITA";
				font-weight: negrita;
				color:black;
				font: small-caps 100%/200% serif;
				margin-bottom: 0;
			}
			.firmaPa1:before {
				content: " FIRMA DEL PACIENTE ";
				font-weight: negrita;
				color:black;
				font: small-caps 100%/200% serif;
			}
			.firmaDoc2:before {
				content: " FIRMA DEL DOCTOR ";
				font-weight: negrita;
				color:black;
				font: small-caps 100%/200% serif;
			}
			.cafirmaP1{
				width: 30%;
				float:left;
				margin-left: 3%;
				border-top-style: dotted;
			}
			.cafirmaDoc2{
				width: 30%;   
				float: right;
				margin-right: 3%;
				border-top-style: dotted;
			}
 		}
	</style>
	<style>
		div.a {
			text-align: center;
		}
		h1.letras {
			font: italic normal 400 16px/22px Arial, Verdana, Sans-serif;
		}

        .vertical-alignment-helper {
            display:table;
            height: 100%;
            margin-left: 41%;
        }
        .vertical-align-center {
            /* To center vertically */
            display: table-cell;
            vertical-align: middle;
            text-align: center;
        }
	</style>
</head>
<body class="light_theme  fixed_header left_nav_fixed" onload="actualizaReloj()">
	<div class="wrapper" id="reporte">
		<div id="ocultoI" class="header_bar">
			<div class="brand">
				<div class="logo" style="display:block"><span class="theme_color">Hospital</div>
			</div>
			<div class="header_top_bar">
				<a href="javascript:void(0);" class="menutoggle"> <i class="fa fa-bars"></i> </a>
				<div class="top_right_bar">
					<div class="user_admin dropdown"> <a href="javascript:void(0);" data-toggle="dropdown"><img src="/images/cajera.png" /><span class="user_adminname"><span>&nbsp;&nbsp;</span><%=data_doc.data.personal.nombre%> <%=data_doc.data.personal.apellidop%></span> <b class="caret"></b> </a>
						<ul class="dropdown-menu">
							<div class="top_pointer"></div>
							<li> <a href="javascript:void(0);" data-target="#myModalCerrar" data-toggle="modal"><i class="fa fa-power-off"></i>Salir</a> </li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="inner">
			<div id="ocultoI" class="left_nav">
				<div class="left_nav_slidebar">
					<ul>
						<li ><a href="/paciente/home/<%=data_doc.data.token_id%>/<%=data_doc.data.token_p%>"><i class="fa fa-home"></i> Inicio </span> <span class="plus"></span> </a></li>
						<li class=""> <a href="javascript:void(0);"> <i class="fa fa-tasks"></i> Consultas Médicas <span class="plus"><i class="fa fa-plus"></i></span></a>
							<ul>
								<li> <a href="/paciente/citas/<%=data_doc.data.token_id%>/<%=data_doc.data.token_p%>"> <span>&nbsp;</span> <i class="fa fa-circle theme_color"></i> <b >Citas Médicas</b> </a></li>
							</ul>
						</li>
                        <li class="left_nav_active theme_border" > <a href="javascript:void(0);"> <i class="fa fa-folder-open-o"></i> Reportes <span class="left_nav_pointer"></span> <span
                            class="plus"><i class="fa fa-plus"></i></span></a>
                            <ul class="opened" style="display:block" >
                                <li> <a href="/paciente/ReporConsultorio/<%=data_doc.data.token_id%>/<%=data_doc.data.token_p%>"> <span>&nbsp;</span> <i class="fa fa-circle theme_color"></i> <b >Reportes por Cons. </b> </a></li>
                                <li> <a href="/paciente/ReporCita/<%=data_doc.data.token_id%>/<%=data_doc.data.token_p%>"> <span>&nbsp;</span> <i class="fa fa-circle theme_color"></i> <b class="theme_color">Reporte de Citas </b> </a></li>                
                            </ul>
                        </li>
					</ul>
				</div>
			</div>
			<div id="sinMargen" class="contentpanel">
				<div class="container clear_both padding_fix col-lg-8"><br>
					<div class="row">
						<div class="col-lg-12  ">
							<div id="main-content" class=" block-web">
								<div class="head">
                                    <div class="actions">
	                                    <!--<<<<<<<<<<<<<< IMAGEN en la hoja de impresion>>>>>>>>>>>>>>>>>>>>>>>-->
                                        <P class="dondeES"></P>
                                        <p class="telefo"></p>
                                        <!--<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<-->	
                                        <p class="fechaI" name="fechaConsulta" id="Fecha_Reloj"  readonly=""  cols="23" rows="1,9px" ></p>
                                    </div>
                                    <!--<<<<<<<<<<<<<< IMAGEN en la hoja de impresion>>>>>>>>>>>>>>>>>>>>>>>-->
                                    <div class="dim2 posiondeImagen">
                                        <img class="oculVistaReal "  src="/images/hospital1.png" />
                                        <p class="hospitalI"></p>
                                    </div>
                                    <!--<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<-->
                                    <div id="ocultoI" class="header">
							        	<div class="info blue_symbols "> <i class="fa fa-signal icon "></i></div>
										<h2 class="content-header " class="text-titles"><span>&nbsp;&nbsp;&nbsp;</span>Reporte por Citas </h2>
									</div>
                                    <!--<<<<<<<<<<<<<< Solo se vera en la hoja de impresion>>>>>>>>>>>>>>>>>>>>>>>-->
									<h4 class="texTitulo1 ordendetitulo center"></h4>
									<!--<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<-->
								</div>
								<div id="ocultoI" class="porlets-content">
                            	    <div class="row">
                            	        <div class="porlets-content">
                            	            <div class="col-md-12">      
                                                <div class="col-md-6 ">
                        	                        <div class="form-group"> 
														<label><i class="fa fa-users"></i>  Pacientes</label>
                                                        <select v-model="historial"> 
															<%for ( var i = 0; i < list_pacietne.length; i++) { %>
															<option :value="<%=list_pacietne[i].numeroHistorial%>" ><%=list_pacietne[i].nombre%> <%=list_pacietne[i].apellidop%> <%=list_pacietne[i].apellidom%></option>
															<% } %>
														</select>
                            	                    </div>
												</div>
												<div class="col-md-6 ">
														<button @click="buscar()" type="submit" class="btn btn-success btn-raised" style="margin-right: 20px;"><i class='fa fa-signal'></i>&nbsp;&nbsp; Generar Reporte</button>
														<button v-if="data_resp != ''" @click="data_resp = ''" type="submit" class="btn btn-success btn-raised" style="margin-right: 20px;"><i class=''></i>&nbsp;&nbsp; Ver todo</button>
														<a onclick="window.print();" class="btn btn-warning btn-raised" style="margin-right: 20px;"> <i class='fa fa-print'></i>&nbsp;&nbsp; Imprimir</a> 
													
												</div>
                            	            </div>
                                        </div>
                            	    </div>
								</div>
	                        	<div class="ordende2" id="main-content">
	                        		<div class="page-content">
										<table class="table table-bordered">
        	                                <thead>
            	                                <tr>
                                                <th class="tamm">N°</th>
                                                <th class="tamm">Historial Clínico</th>
                                                <th class="tamm">Médico</th>
												<th class="tamm">Especialidad</th>
												<th class="tamm">Hora</th>
												<th class="tamm">Día</th> 
                                            	</tr>
	                                        </thead>
    	                                    <tbody>		
												<template v-if="data_resp == ''">
													<%for (var i = 0; i < list_citas.length; i++) { %>
													<tr class="gradeX">
													<td class="tamm"><%=i+1%></td>
													<td class="tamm"><%=list_citas[i].codigo_p%></td>
													<td class="tamm"><%=list_citas[i].medico%></td>
													<td class="tamm"><%=list_citas[i].especialidad%></td>	
													<td class="tamm"><%=list_citas[i].hora.split("/")[0]%></td>	
													<td class="tamm"><%=list_citas[i].dia%></td>											
													</tr>	
												<% } %>	
												</template>												
                                	           	<template v-else>
													<tr class="gradeX" v-for="(list, index) in data_resp">
													<td class="tamm">{{index+1}}</td>
													<td class="tamm">{{list.codigo_p}}</td>
													<td class="tamm">{{list.medico}}</td>
													<td class="tamm">{{list.especialidad}}</td>	
													<td class="tamm">{{list.hora.split("/")[0]}}</td>	
													<td class="tamm">{{list.dia}}</td>											
													</tr>
												</template>										
                            		        </tbody>
		                                </table>                        
        		            		</div>
								</div><br><br><br><br><br><br><br><br><br><br>
								<!--<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< solo se vera en  imprimir >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><>>>-->
								<!--
								<p class="firmaPa1 center cafirmaP1"></p>					
								<p class="firmaDoc2 center cafirmaDoc2"></p>
								-->
								<!--<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><>>>-->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="myModalCerrar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

        <div class="vertical-alignment-helper">
          <div class="modal-dialog vertical-align-center modal-sm ">
            <div class="modal-content">
              <br>
                <div class="center">
                  <i><img src="/images/salir.gif" width="100" height="100" /></i>
                </div>
                <div class="center">
                  <h5><b>¿Cerrar Sesión?</b></h5>
                </div>
              <div class="modal-footer">
                <div class="center">
                  <a href="/delete_token/<%=data_doc.data.token_id%>" class="btn btn-success"><i class="fa fa-check"></i><span>&nbsp;</span>Sí, Confirmar</a>
                  <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i><span>&nbsp;</span>No, Cancelar</button>
                </div>
              </div>
            </div>
          </div>
        </div> 
    </div>
	<!--====== Scripts -->
	<script src="/js/jquery-2.1.0.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/common-script.js"></script>
	<script src="/js/jquery.slimscroll.min.js"></script>
	<script src="/plugins/data-tables/jquery.dataTables.js"></script>
	<script src="/plugins/data-tables/DT_bootstrap.js"></script>
	<script src="/plugins/data-tables/dynamic_table_init.js"></script>
	<script src="/plugins/data-tables/dynamic_table_init2.js"></script>
	<script src="/plugins/edit-table/edit-table.js"></script>
	<script>
		jQuery(document).ready(function () {
			EditableTable.init();
		});
	</script>
	<script src="/js/jPushMenu.js"></script>
	<script src="/js/side-chats.js"></script>
<!--validaciones-->
<script src="/js/fecha.js"></script>
<script type="text/javascript"  src="/plugins/toggle-switch/toggles.min.js"></script> 
<script src="/plugins/checkbox/zepto.js"></script>
<script src="/plugins/checkbox/icheck.js"></script>
<script src="/js/icheck-init.js"></script>
<script type="text/javascript" src="/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script> 
<script type="text/javascript" src="/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script> 
<script type="text/javascript" src="/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script> 
<script type="text/javascript" src="/plugins/bootstrap-timepicker/js/bootstrap-timepicker.js"></script> 
<script type="text/javascript" src="/js/form-components.js"></script> 
<script type="text/javascript"  src="/plugins/input-mask/jquery.inputmask.min.js"></script> 
<script type="text/javascript"  src="/plugins/input-mask/demo-mask.js"></script> 
<script type="text/javascript"  src="/plugins/bootstrap-fileupload/bootstrap-fileupload.min.js"></script> 
<script type="text/javascript"  src="/plugins/dropzone/dropzone.min.js"></script> 
<script type="text/javascript" src="/plugins/ckeditor/ckeditor.js"></script>
<script src="/plugins/validation/parsley.min.js"></script>
<script>
/*==Porlets Actions==*/
    $('.minimize').click(function(e){
      var h = $(this).parents(".header");
      var c = h.next('.porlets-content');
      var p = h.parent();
      
      c.slideToggle();
      
      p.toggleClass('closed');
      
      e.preventDefault();
    });
    
    $('.refresh').click(function(e){
      var h = $(this).parents(".header");
      var p = h.parent();
      var loading = $('&lt;div class="loading"&gt;&lt;i class="fa fa-refresh fa-spin"&gt;&lt;/i&gt;&lt;/div&gt;');
      
      loading.appendTo(p);
      loading.fadeIn();
      setTimeout(function() {
        loading.fadeOut();
      }, 1000);
      
      e.preventDefault();
    });
    
    $('.close-down').click(function(e){
      var h = $(this).parents(".header");
      var p = h.parent();
      
      p.fadeOut(function(){
        $(this).remove();
      });
      e.preventDefault();
    });
</script>
<script src="/js/jPushMenu.js"></script> 
<script src="/js/side-chats.js"></script>
<script src="/sweetalert2/dist/sweetalert2.min.js"></script>
<script src="/moment/moment.js"></script>
<script src="/moment/locale/af.js"></script>
<script src="/url/export.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
<script src="/axios/dist/axios.min.js"></script>
<script>
	const reporte = new Vue({
        el:"#reporte",
		data:{
			url:data_url.url_front_end,
			historial:'',
			data_resp:''
		},
		methods:{
			buscar(){
				var estado = {
                    historial: this.historial
                }
                var esto = {
                  method: 'POST',
                  body: JSON.stringify(estado),
                  headers:{
                    'Content-type' : "application/json"
                  }
                };
                fetch(this.url+'/paciente/vue_citas_paciente_historial',esto)
                .then(res => res.json())
                .catch(error => console.error('Error:', error))
                .then(resp => {
                    console.log(resp)
                    if(resp.success == false){
                        swal.fire(
                          'Error!',
                          '<label style="color:red;">'+resp.msg+'</label>',
                          'error'
                        )
                    }else{
                        this.data_resp = resp
                    }
                })
			}
		}
	})
</script>
</body>
</html>